{"version":3,"sources":["scripts/actions.es6.js"],"names":[],"mappings":";;;;;;;;;;;;AAIO,IAAM,iBAAiB,GAAG,mBAAmB,CAAC;;;;AAE9C,SAAS,gBAAgB,CAAC,QAAQ,EAAE;AAC1C,QAAO;AACN,MAAI,EAAE,iBAAiB;AACvB,UAAQ,EAAR,QAAQ;EACR,CAAC;CACF;;AAEM,IAAM,iBAAiB,GAAG,mBAAmB,CAAC;;;;AAE9C,SAAS,gBAAgB,CAAC,QAAQ,EAAE,IAAI,EAAE;AAChD,QAAO;AACN,MAAI,EAAE,iBAAiB;AACvB,UAAQ,EAAR,QAAQ;AACR,YAAU,EAAE,IAAI,CAAC,GAAG,EAAE;AACtB,WAAS,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAA,QAAQ;UAAI,QAAQ,CAAC,IAAI;GAAA,CAAC;EAC7D,CAAA;CACD;;AAEM,SAAS,cAAc,CAAC,QAAQ,EAAE;;AAExC,QAAO,UAAU,QAAQ,EAAE;;;AAC1B,UAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC;AACrC,MAAI,YAAY,GAAG,CAAC,CAAC,IAAI,CAAC;AACzB,MAAG,EAAE,kCAAkC;AACvC,OAAI,EAAE,KAAK;AACX,WAAQ,EAAE,MAAM;GAChB,CAAC,CAAC;AACH,MAAI,eAAe,GAAG,EAAE,CAAC;AACzB,GAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,UAAS,IAAI,EAAE,UAAU,EAAE,KAAK,EAAC;AAC1D,OAAI,IAAI,EAAE;AACT,KAAC,CAAC,IAAI,CAAC,IAAI,EAAE,UAAA,KAAK,EAAI;AACpB,SAAI,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AAClB,oBAAe,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,iDAAiD,CAAC,CAAC,CAAC;KACnF,CACD,CAAC;IACF;GACD,CAAC,CAAC;AACH,QAAA,CAAC,EAAC,IAAI,MAAA,KAAI,eAAe,CAAC,CAAC,IAAI,CAAC,UAAA,MAAM,EAAI;;AAExC,WAAQ,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAC;GAC7C,CACD,CAAC;EACF,CAAA;CACD","file":"scripts/actions.es6.js","sourcesContent":["/*\n * Action types\n */\n\nexport const REQUEST_DISTRICTS = 'REQUEST_DISTRICTS';\n\nexport function requestDistricts(geoState) {\n\treturn {\n\t\ttype: REQUEST_DISTRICTS,\n\t\tgeoState\n\t};\n}\n\nexport const RECEIVE_DISTRICTS = 'RECEIVE_DISTRICTS';\n\nexport function receiveDistricts(geoState, json) {\n\treturn {\n\t\ttype: RECEIVE_DISTRICTS,\n\t\tgeoState,\n\t\treceivedAt: Date.now(),\n\t\tdistricts: json.data.districts.map(district => district.data)\n\t}\n}\n\nexport function fetchDistricts(geoState) {\n\n\treturn function (dispatch) {\n\t\tdispatch(requestDistricts(geoState));\n\t\tvar districtsDfd = $.ajax({\n\t\t\turl: \"http://localhost:8080/districts/\",\n\t\t\ttype: \"GET\",\n\t\t\tdataType: \"json\"\n\t\t});\n\t\tvar demographiesDfd = [];\n\t\t$.when(districtsDfd).then(function(data, textStatus, jqXhr){\n\t\t\tif (data) {\n\t\t\t\t_.each(data, datum => { \n\t\t\t\t\t\tlet id = datum.id;\n\t\t\t\t\t\tdemographiesDfd.push($.getJSON(\"http://localhost:8080/district/${id}/demography\"));\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\t$.when(...demographiesDfd).done(result => {\n\t\t\t\t//so I have demographic data right now. \n\t\t\t\tdispatch(receiveDistricts(geoState, result));\n\t\t\t}\n\t\t);\n\t}\n}"]}